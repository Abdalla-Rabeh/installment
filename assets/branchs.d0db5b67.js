import{aO as V,aP as m,r as _,o as d,a2 as c,b as p,e as s,f as t,Q as n,R as D,S as g,$ as w,X as f,Y as u,Z as C,aQ as b,j as v,_ as $,a5 as h,U as r}from"./index.41f779f5.js";import{_ as k}from"./pencil-alt.2eb93201.js";import{V as B}from"./VForm.963ba347.js";const I={data(){return{formData:{name:"",address:"",phone:"",currencyId:null},items:[],id:null,columns:[{label:this.$t("tableColumnNo"),field:"lineNumber",sortable:!1},{label:this.$t("name"),field:"name"},{label:this.$t("address"),field:"address"},{label:this.$t("phone"),field:"phone"},{label:this.$t("currencyId"),field:"currency.code"},{label:this.$t("actions"),field:"actions",sortable:!1,tdClass:"custom-th-class"}],rows:[],EditForm:!1}},computed:{computedTableData(){return this.rows.map((e,a)=>({...e,lineNumber:a+1}))}},mounted(){this.GetCurrencies(),this.getData()},methods:{async getData(){await m.get("Branches/GetBranches").then(e=>{this.rows=e.data.data})},async GetCurrencies(){try{const e=await m.get("Settings/GetGeneralSettings");this.items=e.data.data.currencyResponse.map(a=>({title:a.code,value:a.id})),console.log(this.items,"d",e.data.data.currencyResponse)}catch(e){console.error("Error fetching currencies:",e)}},editRow(e){this.id=e.id,this.EditForm=!0,this.formData.name=e.name,this.formData.address=e.address,this.formData.phone=e.phone,this.formData.currencyId=e.currency.id},async edit(){await m.put("Branches/UpdateBranch",{id:this.id,name:this.formData.name,address:this.formData.address,phone:this.formData.phone,currencyId:this.formData.currencyId}).then(()=>{this.EditForm=!1,this.getData()})}}},R={class:"mt-3"},E={class:"card custom-card"},G={class:"card-header p-3 tx-medium my-auto tx-white custom-card-header border-bottom-0 bg-primary"},L={class:"main-content-label on-secondary my-auto tx-medium"},N={class:"card-body"},S={key:0},T=["onClick"],F=r("img",{src:k,alt:""},null,-1),U=[F],P={key:1};function A(e,a,Q,j,o,i){const y=_("VueGoodTable");return d(),c("div",null,[o.EditForm?(d(),p(f,{key:0},{default:s(()=>[t(n,{cols:"12",md:"12"},{default:s(()=>[t(D,{title:e.$t("branchs")},{default:s(()=>[t(g,null,{default:s(()=>[t(B,{onSubmit:w(i.edit,["prevent"])},{default:s(()=>[t(f,null,{default:s(()=>[t(n,{cols:"12",md:"3"},{default:s(()=>[t(u,{modelValue:o.formData.name,"onUpdate:modelValue":a[0]||(a[0]=l=>o.formData.name=l),label:e.$t("name"),placeholder:e.$t("name")},null,8,["modelValue","label","placeholder"])]),_:1}),t(n,{cols:"12",md:"3"},{default:s(()=>[t(u,{modelValue:o.formData.address,"onUpdate:modelValue":a[1]||(a[1]=l=>o.formData.address=l),label:e.$t("address"),placeholder:e.$t("address")},null,8,["modelValue","label","placeholder"])]),_:1}),t(n,{cols:"12",md:"3"},{default:s(()=>[t(u,{modelValue:o.formData.phone,"onUpdate:modelValue":a[2]||(a[2]=l=>o.formData.phone=l),label:e.$t("phone"),placeholder:e.$t("phone")},null,8,["modelValue","label","placeholder"])]),_:1}),t(n,{cols:"12",md:"3"},{default:s(()=>[o.items.length>0?(d(),p(C,{key:0,modelValue:o.formData.currencyId,"onUpdate:modelValue":a[3]||(a[3]=l=>o.formData.currencyId=l),label:e.$t("currencyId"),items:o.items},null,8,["modelValue","label","items"])):b("",!0)]),_:1}),t(n,{cols:"12",class:"d-flex gap-4"},{default:s(()=>[t(v,{type:"submit",class:"d-block m-auto btn-edit bg-success"},{default:s(()=>[$(h(e.$t("Edit")),1)]),_:1})]),_:1})]),_:1})]),_:1},8,["onSubmit"])]),_:1})]),_:1},8,["title"])]),_:1})]),_:1})):b("",!0),r("div",null,[r("div",R,[r("div",E,[r("div",G,[r("h5",L,h(e.$t("Lbranches")),1)]),r("div",N,[t(y,{columns:o.columns,rows:i.computedTableData,"select-options":{enabled:!1},"search-options":{enabled:!0,placeholder:e.$t("serach")},"pagination-options":{enabled:!0,mode:"records",position:"top",dropdownAllowAll:!0,setCurrentPage:2,nextLabel:e.$t("next"),prevLabel:e.$t("prev"),rowsPerPageLabel:e.$t("Rowsperpage"),ofLabel:"of",pageLabel:"page",allLabel:"All"}},{"table-row":s(l=>[l.column.field=="actions"?(d(),c("span",S,[r("button",{type:"button",class:"btn me-2 w-100",onClick:M=>i.editRow(l.row)},U,8,T)])):(d(),c("span",P,h(l.formattedRow[l.column.field]),1))]),_:1},8,["columns","rows","search-options","pagination-options"])])])])])])}const Z=V(I,[["render",A]]);export{Z as default};
