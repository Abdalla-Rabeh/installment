import{aO as $,aP as m,r as v,o as c,a2 as f,b as g,e as a,f as t,Q as s,R as D,S as V,$ as w,X as p,Y as d,j as y,_,a5 as h,aQ as B,U as n}from"./index.41f779f5.js";import{_ as k}from"./pencil-alt.2eb93201.js";import{V as I}from"./VForm.963ba347.js";const A="/installment/assets/trash.e5348aba.svg",S={data(){return{id:null,formData:{name:"",price:"",priceBeforIncrease:"",count:""},updateData:{name:"",price:"",priceBeforIncrease:"",count:""},columns:[{label:this.$t("tableColumnNo"),field:"lineNumber",sortable:!1},{label:this.$t("name"),field:"name"},{label:this.$t("cost"),field:"priceBeforIncrease"},{label:this.$t("price"),field:"price"},{label:this.$t("currencyId"),field:"count"},{label:this.$t("actions"),field:"actions",sortable:!1,tdClass:"custom-th-class"}],EditForm:!1,AddForm:!0,rows:[],currentPage:1,pageSize:1e9,paginationOptions:{enabled:!0,mode:"records",position:"top",dropdownAllowAll:!0,nextLabel:this.$t("next"),prevLabel:this.$t("prev"),rowsPerPageLabel:this.$t("Rowsperpage"),ofLabel:"of",pageLabel:"page",allLabel:"All"}}},computed:{computedTableData(){return this.rows.map((e,r)=>({...e,lineNumber:r+1}))}},mounted(){this.getData()},methods:{async getData(){try{const e=await m.post("Product/GetProducts",{pageNumber:this.currentPage,pageSize:this.pageSize,name:""});this.rows=e.data.list}catch(e){console.error("Error fetching data:",e)}},async handlePageChange(e){this.currentPage=e,await this.getData()},editRow(e){this.AddForm=!1,this.EditForm=!0,this.id=e.id,this.updateData.name=e.name,this.updateData.price=e.price,this.updateData.priceBeforIncrease=e.priceBeforIncrease,this.updateData.count=e.count},async edit(){await m.put("Product/UpdateProduct",{id:this.id,name:this.updateData.name,price:this.updateData.price,priceBeforIncrease:this.updateData.priceBeforIncrease,count:this.updateData.count,productBranchRequests:[{branchId:localStorage.getItem("currencyId"),isActive:!0}]}).then(()=>{this.EditForm=!1,this.AddForm=!0,this.getData()})},async deleteRow(e,r){const i=this.$t;this.$swal.fire({title:i("Areyousoreu"),text:i("youwont"),icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",cancelButtonText:i("no"),confirmButtonText:i("yesDel")}).then(b=>{b.isConfirmed&&m.delete(`Product/DeleteProduct?productId=${e}`).then(()=>{this.$swal.fire({title:i("deleted"),text:i("de"),icon:"success"}),this.rows.splice(r,1)}).catch(l=>{console.error("Error deleting:",l)})})},changePage(e){this.currentPage=e,this.getData()},async add(){await m.post("Product/AddProduct",{name:this.formData.name,price:this.formData.price,priceBeforIncrease:this.formData.priceBeforIncrease,count:this.formData.count,productBranchRequests:[{branchId:localStorage.getItem("currencyId"),isActive:!0}]}).then(()=>{this.getData(),this.formData={}})}}},F={class:"mt-3"},R={class:"card custom-card"},U={class:"card-header p-3 tx-medium my-auto tx-white custom-card-header border-bottom-0 bg-primary"},T={class:"main-content-label on-secondary my-auto tx-medium"},E={class:"card-body"},N={key:0},L=["onClick"],q=n("img",{src:k,alt:""},null,-1),O=[q],z=["onClick"],G=n("img",{src:A,alt:""},null,-1),Q=[G],j={key:1};function M(e,r,i,b,l,u){const C=v("VueGoodTable");return c(),f("div",null,[l.EditForm?(c(),g(p,{key:0},{default:a(()=>[t(s,{cols:"12",md:"12"},{default:a(()=>[t(D,{title:e.$t("products")},{default:a(()=>[t(V,null,{default:a(()=>[t(I,{onSubmit:w(u.edit,["prevent"])},{default:a(()=>[t(p,null,{default:a(()=>[t(s,{cols:"12",md:"6"},{default:a(()=>[t(d,{modelValue:l.updateData.name,"onUpdate:modelValue":r[0]||(r[0]=o=>l.updateData.name=o),label:e.$t("name"),placeholder:e.$t("name")},null,8,["modelValue","label","placeholder"])]),_:1}),t(s,{cols:"12",md:"6"},{default:a(()=>[t(d,{modelValue:l.updateData.priceBeforIncrease,"onUpdate:modelValue":r[1]||(r[1]=o=>l.updateData.priceBeforIncrease=o),label:e.$t("cost"),placeholder:e.$t("cost")},null,8,["modelValue","label","placeholder"])]),_:1}),t(s,{cols:"12",md:"6"},{default:a(()=>[t(d,{modelValue:l.updateData.price,"onUpdate:modelValue":r[2]||(r[2]=o=>l.updateData.price=o),label:e.$t("price"),placeholder:e.$t("price")},null,8,["modelValue","label","placeholder"])]),_:1}),t(s,{cols:"12",md:"6"},{default:a(()=>[t(d,{modelValue:l.updateData.count,"onUpdate:modelValue":r[3]||(r[3]=o=>l.updateData.count=o),label:e.$t("quantity"),placeholder:e.$t("quantity")},null,8,["modelValue","label","placeholder"])]),_:1}),t(s,{cols:"12",class:"d-flex gap-4"},{default:a(()=>[t(y,{type:"submit",class:"d-block m-auto btn-edit"},{default:a(()=>[_(h(e.$t("Edit")),1)]),_:1})]),_:1})]),_:1})]),_:1},8,["onSubmit"])]),_:1})]),_:1},8,["title"])]),_:1})]),_:1})):B("",!0),l.AddForm?(c(),g(p,{key:1},{default:a(()=>[t(s,{cols:"12",md:"12"},{default:a(()=>[t(D,{title:e.$t("products")},{default:a(()=>[t(V,null,{default:a(()=>[t(I,{onSubmit:w(u.add,["prevent"])},{default:a(()=>[t(p,null,{default:a(()=>[t(s,{cols:"12",md:"6"},{default:a(()=>[t(d,{modelValue:l.formData.name,"onUpdate:modelValue":r[4]||(r[4]=o=>l.formData.name=o),label:e.$t("name"),placeholder:e.$t("name")},null,8,["modelValue","label","placeholder"])]),_:1}),t(s,{cols:"12",md:"6"},{default:a(()=>[t(d,{modelValue:l.formData.priceBeforIncrease,"onUpdate:modelValue":r[5]||(r[5]=o=>l.formData.priceBeforIncrease=o),label:e.$t("cost"),placeholder:e.$t("cost")},null,8,["modelValue","label","placeholder"])]),_:1}),t(s,{cols:"12",md:"6"},{default:a(()=>[t(d,{modelValue:l.formData.price,"onUpdate:modelValue":r[6]||(r[6]=o=>l.formData.price=o),label:e.$t("price"),placeholder:e.$t("price")},null,8,["modelValue","label","placeholder"])]),_:1}),t(s,{cols:"12",md:"6"},{default:a(()=>[t(d,{modelValue:l.formData.count,"onUpdate:modelValue":r[7]||(r[7]=o=>l.formData.count=o),label:e.$t("quantity"),placeholder:e.$t("quantity")},null,8,["modelValue","label","placeholder"])]),_:1}),t(s,{cols:"12",class:"d-flex gap-4"},{default:a(()=>[t(y,{type:"submit",class:"d-block m-auto btn-edit"},{default:a(()=>[_(h(e.$t("Add")),1)]),_:1})]),_:1})]),_:1})]),_:1},8,["onSubmit"])]),_:1})]),_:1},8,["title"])]),_:1})]),_:1})):B("",!0),n("div",null,[n("div",F,[n("div",R,[n("div",U,[n("h5",T,h(e.$t("Lproducts")),1)]),n("div",E,[t(C,{columns:l.columns,rows:u.computedTableData,"select-options":{enabled:!1},"search-options":{enabled:!0,placeholder:e.$t("serach")},"pagination-options":l.paginationOptions,onOnPageChange:u.handlePageChange},{"table-row":a(o=>[o.column.field=="actions"?(c(),f("span",N,[n("button",{type:"button",class:"btn me-2",onClick:P=>u.editRow(o.row)},O,8,L),n("button",{class:"btn me-2",onClick:P=>u.deleteRow(o.row.id,o.index)},Q,8,z)])):(c(),f("span",j,h(o.formattedRow[o.column.field]),1))]),_:1},8,["columns","rows","search-options","pagination-options","onOnPageChange"])])])])])])}const J=$(S,[["render",M]]);export{J as default};
